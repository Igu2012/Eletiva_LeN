import random
import json

# 1. Carregue a lista de palavras (certifique-se de que o arquivo TXT está na mesma pasta)
try:
    with open('br-sem-acentos.txt', 'r', encoding='utf-8') as f:
        palavras_brutas = f.read().splitlines()
except FileNotFoundError:
    print("Erro: O arquivo 'br-sem-acentos.txt' não foi encontrado. Baixe-o da URL da IME-USP.")
    exit()

# 2. Filtre e Limpe:
# - Remove palavras com caracteres não-alfabéticos (pontuação, números, etc.)
# - Remove palavras muito longas (Ex: Max 12 letras)
palavras_limpas = [
    p.lower() 
    for p in palavras_brutas 
    if p.isalpha() and len(p) >= 3 and len(p) <= 12
]

# 3. Selecione 10.000 palavras aleatoriamente (se disponíveis)
num_desejado = 10000
if len(palavras_limpas) > num_desejado:
    palavras_finais = random.sample(palavras_limpas, num_desejado)
else:
    palavras_finais = palavras_limpas
    print(f"Atenção: Apenas {len(palavras_limpas)} palavras foram encontradas após o filtro.")

# 4. Salve no formato JSON
with open('dicionario_pt.json', 'w', encoding='utf-8') as f:
    json.dump(palavras_finais, f, indent=4, ensure_ascii=False)

print(f"Sucesso! {len(palavras_finais)} palavras salvas em 'dicionario_pt.json'.")
